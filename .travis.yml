language: node_js
node_js:
- 12
services:
- postgresql
addons:
  postgresql: '10'
dist: xenial
notifications:
  email:
    on_success: change
    on_failure: always
install:
- npm ci
before_script:
- psql -c 'create database "graceshopper-test";' -U postgres
script:
- npm test
- npm run build-client
before_deploy:
- rm -rf node_modules
deploy:
  skip_cleanup: true
  provider: heroku
  app: fullsnack-sweet-shop
  api_key:
    secure: DO3FaqenqNub18K9/Pjc+nZAIFhUMIFPI/cleqoZqP7W0yc5xMYaR4eIVolTushuYpoThmjQoeHv4JCv89nsY7tiU9hVU5wrrrNPToBGhvPg/K9MtMSUDJ3XRYtmDv+JLciDvuoCxPlkmhv7I3HsDBApDil4JGYmDeiPCF5jZfE/viHgxp5JH8q89x7qNhiS5kTiyBkd2j5kKFI5OHyiDDtG1N2jkYycYnJ012RsFe30IGF/D6Br41tCFV6XwCrClrMIEFPU69dT2A8HLJHQqMPBYTc+nzb22EdGeB4MbalV+6qV/ctZ0YB/3Zu7/E14WL0Yz8ey+mqQ23K73Oy8wlRrwQwXNyv0M8A22z6cfeccANtjZNMuWNRLLGs+BF94x2NH2vqbH3tHbed04xXbdM+QIPDcu93uEkCfrhSbuKNyjjKL6GNSGKahDVTMOm8PU5SPuTBXuNM6GrZqDo5/2VruLX2jqUzxRDBiwBlx0yoqMRVxuf2jFEdVOyE5xcb+xjSqaJdVaxyQfHNtvY20fLcoN1dbLrgASgGfVgbTJ5cuBoaGbD857vtsGn8pGK8TMJheAl+mmDCWlYl47LrPN64yfssjn0ZyoWawG6gjZvgScKw5LpOIUUsqKPvpPw09dR7zN9kHIkF+HWL3m/yclx5n7WmsDfl+GkKNrOaskp0=
env:
  global:
  - secure: G5wlwuROKp+l3HAeaMoniwtw7SxbuT/OF85vm88DnleJMhprBUkuw1vr/r5u+0IKShXmz68o/ULn3fXkbzgHxbG7z+t6uiZXhk8d0lU7AsAK6blZ5qYoOLEYIzPlolgNYycfLO8uhw9PcHuWfXpwy4DImv647N15XeteeolnGVEY40Drn72wBXH5fTVnq6XOHobpT52Tk/vOPXWTQ9BYjRu9AfeE2hvtjJwpLdLIaKtL/K2dFkf3tUxPUdGjCagkj6kOYKBBcn4xy3JRizCbnLqGVUa968YGlWDMkMPJaY+oGbf3G1N8QjkkCA/1QwsDEuyM3wsnKmKriBNe95y2lQYSUoMPxnIvrr6ZS1eIwthznR0cYSgte8TMSEhT9YmXQcYU37xIjPnmwMz9xGwig1UJpVDtepJHnrgWWE1NKHc9DMeRWw6IlThr1dx627toueZpRe0V8v/AfkUja7NCk0uw9KGZB1Pq5zzxoZTeOASMUOz7pyMcGyWwFzgQIUARdSjdUHivvqmd9/RVAPkPrkRXWcNpE6UYe+KIf3djmUSHYQyW7rvu0QoKdPQn3RKo9+3mDOQD/An2Jy2b+TwSQ6T7Vo3LGbCS5kK0F/YurwqcbAIsarkFzBgSdCPiH2GlGbGem0Bb30VlJ9n9fFcimoU4wMwEntb1Roj4MYowQQ0=
  - secure: KUUKUqhVOoBCncqK6hMGXiS0IpKwEs7u+Ay6qbDEqS85Uwn+wNqklO4HvDLzMuI6G5onCyP37Zy70bzpJ2aEX1/7EUu4opfsvDIWCZBweuiKnk8515eVg5s8yZUaJcalr9H8EogfsRpWbASLiC7Pie22J68y7Nyg/dgGL0qZM5TBQzbhAEQuJfRwqizZt3ZL2pkDMuw5YFtvLxo2TZ5r36lwzEGFhcpKjlXpH3hz1JmA/QjKHD3T8CAwVn4yjxs4oWIMwY2gXiRX3fiXmIE4pB2vrBvAcYWDXBWetzks23+l0pF5dUTBz0IC7NKJhhaW1p7dvDmnJnfXsUGHVXnyub/1ZCRn3jyWTaiQonNb3xdBuryyjPUN3egVcL91wdnAJb3Kc9I+RkUS+4r1OtCaxtaTH9TRY/GqKZqp8IgGOnMvMUvdwi2lVOzCVM7h6fAvcAExZo4Hg6I77i3Mf3MBZV94C0gdrhG++WHTjueSfBU0/CW/ZPT/MsEsIIgl5AyOwoyXhkGE6umvvY+0AC2N59hDtwCPDePVZIuiIcNUcGaMoA4Dhk3QtdEFL3R/lv3ujVG2TfOtwWt7ya9sbYzpulk7XJgFhXvA+O0DBeCD5+qGPxCjnnG0NiZBvXhn078Jxel2fgH174UqymtpukPV9+Qj4T8zVCU0PsJugIcpVCc=
  - secure: Ei91xTU+pe22k9iW+nmKQufYBMqi7Hx9YyGwu2tSQbzeld0kwBsCHJJk06H0BlWycwvOGo3JN2LO1E4mo923IYUXGLlYBFIsb6Hx3RFO+OXNj+DBX/2CCeJ6bx7Id3Tp9nmsuP4vmRtD88OrvjE3ELI0UfdfT5rFBydpghKJ+bMLZKtop75sftciD1p10GnA15rP2ZosG8wCNazYUTutYOPOgIIbnRxDjpoNFyEl6d58If4Ss4o776ik/qOtR1Ye0XbTctXJ2BLJo7/sOLkEI68Ydqi3cY6lh4eeehZd+JVfpfCcN/FjD9UnA885AzDrnIEkFzk9xazs11aAs9upXaeWQ781yykGiLpDpHJLDPkC9GRCXYhHD7Mbw4c3rDbVrlNBZzXBgcT1cwaAix69Kg78dp3bI5Y6kPUNXIQqUtoqYXIs/KGVgGsBILhVCZG8DF1qlr0DzfHXqOT7aCj+cBM4k6WAdlqcDpLpAP3phZAS5XuKA/mKGLBaHgbs9G1DudtVdjn8mVXnMfZAliY7hLn21FVH61xCxJDAIKH6PoTwQS7g4S6VXjPBE7YLm0t7xh8RalD3AeXdfn/5ZL8EZJ1h1dps5wuz2xxvstrRIz2mwdCCrXH8FdcNsqQa1RSwluvS8AOLOFT9rISMD0TbYnAIMtWRlXDSTuapHUDfC6U=
  - secure: U21i+/GRPDDt943kk0RvQ3PWg2e3nDOo4P+OpSs3bYE76GDwN8rKDMdrxjn84RBj3YS5Z2g5q2C0a4Lds1wq/Vyj0E9hnT5JzsHvbjrLDZenSsO67QPCAOpwhxTR8jcK66+p/52+ChT8Y7JVqOQRdaH3APNjTzUVs/xGURtV1dO9tbSQ1WWnBTq4C1fTcHK1MX8g8Gt3ZvNTTfuDK5UXzVtzbMm5WiUl14zFj81MNfbb45sAGO5J9dTx5BognDNtvzYNfYiAjxvOht1pgVcSd/J3s21AZQ5SlDpVrg1eVt+wQmWDUREPCRpLhQKyCMK12Ayebuzth+Ka1A5q3xbqXGpqFQtYhZgWQXtxIpo4l6t5eBN7Zquhr6ixUHK7/KgoCZpGUjZyzQdXb0gWu4niRNkBcvsRuYI5N076ELB2x4FtRzImPq1P+ObVPniietTkYQLaIab1H13ZEzJSE4CvHuclWCuXF+2iDXME4NLjl05EHZ/Jm4S2wyWBUw4cFY5HoM+Sgn49/YmJ/wP6wgIo5H4RRWshxzmmus1aGrf2R9/rAd8cBEcK765GYwLHlndsl9dFzwMJ74XWipwM5LpgBtL+d3sF5ZQZll3xOK6pRWiNyxfPdh/4/5cqZ+6ab4kAChol61q01YlLU7qml/7QvNs3SSDBisXjZ3AjhMFC3MU=
  - secure: I2yncAuH0w7uKyQa8w9Uwj4FbvGS5N3xtDQqzGW2uxE5rRmBSbGX/fV/GcF2St4BpoyXh4OFPQz3kkKyAlrqNKCiSnfU8iq8kEYftgSw4NVZWxXgPo5hJIzhqv9U9aoQrlLqmYOspifGnsQNtLJn90LTvJhsv/rJvn4aIzyd+RWR9wYTJhd59NLdS5d5hW+7ALJc3xUWL+8AzsIPhNyOuX/PUB17oBK4fsPSr7n1ItjANUdgysAyDdTpyx2cIUmgm0Q2pBGz+z2ahDjtO7vlYAF0TqYsVpdZBHOdXcET9MasLJ3zZqcjduf5zURbVdOnFoqm/bjCOq8uJ6GZV8APvigzCOXXLNOoFx6xiU8npr8TvhlpA3oe3eIjUpbVCVs45GFb8ftKzn5GPuZxCeMCTB1Im93stuRrnwn0b7mwPz2vjdSa25y5Ufl5nuke7/QEZm1QzGxA9j9yLZvvr4oV48XYH4ACbDaENTdMVHPJ0VJKFld3ciqp2HZEzvwXRT0rmatw2m7h8L17fb2mwpoA47HgSHRfWNyS1Xtlob/KPkrfRBC3ngJaiLvnUrNs9Q641uXq4+0nCPrMTPTPxUyn6Rz/HV235s2g2SP43yDfRy6x9bToAPpyf2sz8oWPfCjFzS1AO6qM61BzaHs+fY2nM9St7pHqiRQvq6UVZoD5tT4=
  - secure: mpeVkBOexQbD6UHq58qGLz/Z2TTrGaTx+VJ7fgb+qyWcAJkKiv+VNVkxUyao8bN4CwNqogJaf451+QNHJWU2SALQVpHgqtuqmU/U4cZBxI0P7TPf3HGpdRlbNJj48CIV8AT6Vfq+CdxpsWvL93E66yyc0fDHvfYYQODux4pCccpjVy4Esj4HWhJOrb2ZJnnzBFy3MBKSFGN3Nv6SVO0lIvhhnrVl5KOXAPFm5KL9ZdQNz4s9mkxZbd2i7p+cJi/lQfF3yyYsBnTGLrNoxiq3ZoplkEtGjoml7bV5XZTJPjefHQc03e3QSc10loyaOUdIuGNU1EkrstnA3ctRVv2qm0CWFihpbSNj6T74j90W14raTwo7yiJKKaYXqBm18ijyDeWxlBeG/UD1Ss8XN7J9DWeJqgEWob5VBCSQkLbXMtTVDnvVV6vGwT3e4fz/xqMlgMskergSdu6Q/2lLYcs7cnxPFPk45lAqMuc7S95bJElN3AqusSo2KX4QuRPtpiXoJFVIT/1noRI7H0zCC88i5Dbb3yngzIxjmV6kraPoNVuH32bNS8pEv+hMBqBuZjTHnrO1MD6ALCPjJYHHRTO+ikRzNFNlehy23MTVH+bH9C+ZLnRCzp5ciF1dOZJmCdnFUYtt58AinftqSwrL9xvL9K/JT2du7S3dm6bPIO0KBz8=
  - secure: w36ktwzbS3cJFhAT71leXDYHy9wock82QlkAegDv5ebOIk9k/aI6lm1ICYPndr2glxk3hw9DZ+uYRZ0eKCmshtbDp+sUmZc67N13aiK1Ugrl9vYbjOMVdFpLh1ulESeHWY/VyZM/BXgIinSSVXKlGYPvjYSdPZarYir2xeGu3m6FcV2BPAZblbiwgbwbQAC1q4fMco3xq7bYOo0AGeckwteeeiwQQMXMFQvWcKTc1s91y0do4QLZX4grfMesSTEGQ4b0JHFCTT/zAHNdMpT4YTD1D1ftIzjQCBBE/g/xPe/b92P/dOsCMF6hImSjrb3DQr0Qq7jmjmda2dRidq6xujQOxTuorWMJQzlP9sTjb6Tah85Rvt61iWUOwN6bGlvzqnaPYIR923BV4oPnlVpiLl4OasMmo3CA9zRnIm4b71ZIZoZYUZEqv3I3Lle0dvJLEmJbChFTlNRCKDd0HxWCmy39uE+qDVksJO4+ItBwmokE1UN3P0ziLMktMXKQMcveggU4OwZEAM4gM0we/5sNLDkm3/ldX38ARwalK05+lL7mK8ArKukQrLc9929/WoNTEDsnZnbS6FW5EGuZAkuDPQyrO1zxSZdVz8HaGiCFsCnuLBk7FAdBKLD1mrmEpHsgsdquSU3F8l2GE0KmvmUOiJcra11VYXVF8/XvcUn2EwA=
